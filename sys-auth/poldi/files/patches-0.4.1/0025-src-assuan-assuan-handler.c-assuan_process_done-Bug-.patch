From 5b5da41531da1304e643c93130139259b0d3fd40 Mon Sep 17 00:00:00 2001
From: NIIBE Yutaka <gniibe@fsij.org>
Date: Thu, 1 May 2014 13:59:48 +0900
Subject: [PATCH 25/52] * src/assuan/assuan-handler.c (assuan_process_done):
 Bug fix using code.

---
 src/assuan/assuan-handler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/assuan/assuan-handler.c b/src/assuan/assuan-handler.c
index b940bfd..d60e380 100644
--- a/src/assuan/assuan-handler.c
+++ b/src/assuan/assuan-handler.c
@@ -558,7 +558,7 @@ assuan_process_done (assuan_context_t ctx, int rc)
             {
               /* Assume this is an libgpg-error.  */
               sprintf (errline, "ERR %d %.50s <%.30s>%s%.100s",
-                       rc, ebuf, esrc,
+                       code, ebuf, esrc,
                        text? " - ":"", text?text:"");
             }
           else
@@ -593,7 +593,7 @@ assuan_process_done (assuan_context_t ctx, int rc)
 	      
               gpg_strerror_r (rc, ebuf, sizeof ebuf );
               sprintf (errline, "ERR %d %.50s <%.30s>%s%.100s",
-                       rc,
+                       code,
                        ebuf,
                        gpg_strsource (rc),
                        text? " - ":"", text?text:"");
-- 
2.17.0

